# ğŸ¦ FLOW Há»† THá»NG QUáº¢N LÃ VAY TÃN Dá»¤NG

## ğŸ“‹ Tá»”NG QUAN Há»† THá»NG

Há»‡ thá»‘ng Ä‘Æ°á»£c thiáº¿t káº¿ theo mÃ´ hÃ¬nh **2 pháº§n chÃ­nh** vá»›i **6 vai trÃ² ngÆ°á»i dÃ¹ng** vÃ  **quy trÃ¬nh xá»­ lÃ½ 4 giai Ä‘oáº¡n**.

---

## ğŸ‘¥ CÃC VAI TRÃ’ NGÆ¯á»œI DÃ™NG

### ğŸ” **PHáº¦N 1: KHÃCH HÃ€NG**
- **TÃ i khoáº£n máº«u:**
  - `customer1/customer123`
  - `customer2/customer123`
  - `john/john123`
  - `jane/jane123`

- **Chá»©c nÄƒng:**
  - ğŸ“ Ná»™p há»“ sÆ¡ vay tÃ­n dá»¥ng má»›i
  - ğŸ‘ï¸ Theo dÃµi tráº¡ng thÃ¡i há»“ sÆ¡ cá»§a mÃ¬nh
  - ğŸ“‹ Xem danh sÃ¡ch táº¥t cáº£ há»“ sÆ¡ Ä‘Ã£ ná»™p
  - ğŸ“„ Xem há»£p Ä‘á»“ng (khi Ä‘Æ°á»£c phÃª duyá»‡t)

### ğŸ¢ **PHáº¦N 2: NGÃ‚N HÃ€NG - 5 VAI TRÃ’**

#### ğŸ‘‘ **1. QUáº¢N TRá»Š VIÃŠN (ADMIN)**
- **TÃ i khoáº£n:** `admin/admin123`
- **Quyá»n háº¡n:**
  - Truy cáº­p táº¥t cáº£ cÃ¡c phÃ²ng ban
  - Xem dashboard tá»•ng quan
  - Thá»±c hiá»‡n táº¥t cáº£ cÃ¡c thao tÃ¡c cá»§a má»i phÃ²ng ban
  - Theo dÃµi toÃ n bá»™ quy trÃ¬nh

#### ğŸ“¥ **2. PHÃ’NG TIáº¾P NHáº¬N**
- **TÃ i khoáº£n:** `intake/intake123`
- **Nhiá»‡m vá»¥:**
  - Kiá»ƒm tra tÃ­nh Ä‘áº§y Ä‘á»§ cá»§a há»“ sÆ¡
  - Tiáº¿p nháº­n há»“ sÆ¡ há»£p lá»‡
  - Chuyá»ƒn há»“ sÆ¡ sang phÃ²ng tháº©m Ä‘á»‹nh
- **Há»“ sÆ¡ xá»­ lÃ½:** Tráº¡ng thÃ¡i `SUBMITTED`

#### ğŸ” **3. PHÃ’NG THáº¨M Äá»ŠNH TÃN Dá»¤NG**
- **TÃ i khoáº£n:** `assessment/assessment123`
- **Nhiá»‡m vá»¥:**
  - Tháº©m Ä‘á»‹nh tÃ­n dá»¥ng khÃ¡ch hÃ ng
  - Kiá»ƒm tra blacklist (email, sá»‘ Ä‘iá»‡n thoáº¡i)
  - ÄÃ¡nh giÃ¡ kháº£ nÄƒng tráº£ ná»£
  - ÄÆ°a ra quyáº¿t Ä‘á»‹nh phÃª duyá»‡t/tá»« chá»‘i
- **Há»“ sÆ¡ xá»­ lÃ½:** Tráº¡ng thÃ¡i `UNDER_REVIEW`, `ASSESSED`

#### ğŸ’° **4. PHÃ’NG GIáº¢I NGÃ‚N**
- **TÃ i khoáº£n:** `disbursement/disbursement123`
- **Nhiá»‡m vá»¥:**
  - Thá»±c hiá»‡n giáº£i ngÃ¢n cho há»“ sÆ¡ Ä‘Ã£ phÃª duyá»‡t
  - HoÃ n táº¥t quy trÃ¬nh cho vay
- **Há»“ sÆ¡ xá»­ lÃ½:** Tráº¡ng thÃ¡i `APPROVED`, `DISBURSED`

---

## ğŸ”„ QUY TRÃŒNH Xá»¬ LÃ Há»’ SÆ  (4 GIAI ÄOáº N)

### **GIAI ÄOáº N 1: Ná»˜P Há»’ SÆ **
```
KhÃ¡ch hÃ ng â†’ Ná»™p há»“ sÆ¡ â†’ Tráº¡ng thÃ¡i: SUBMITTED
```
- KhÃ¡ch hÃ ng Ä‘iá»n thÃ´ng tin:
  - ThÃ´ng tin cÃ¡ nhÃ¢n (há» tÃªn, email, SÄT, thu nháº­p)
  - ThÃ´ng tin khoáº£n vay (sá»‘ tiá»n, ká»³ háº¡n, má»¥c Ä‘Ã­ch)
- Há»‡ thá»‘ng tá»± Ä‘á»™ng táº¡o mÃ£ há»“ sÆ¡ vÃ  gá»­i link theo dÃµi

### **GIAI ÄOáº N 2: PHÃ’NG TIáº¾P NHáº¬N**
```
SUBMITTED â†’ Kiá»ƒm tra â†’ Tiáº¿p nháº­n â†’ UNDER_REVIEW
```
**Quy trÃ¬nh:**
1. NhÃ¢n viÃªn tiáº¿p nháº­n kiá»ƒm tra tÃ­nh Ä‘áº§y Ä‘á»§:
   - âœ… Há» tÃªn, email, SÄT cÃ³ Ä‘áº§y Ä‘á»§ khÃ´ng
   - âœ… Sá»‘ tiá»n vay â‰¥ 1,000,000 VND
   - âœ… Ká»³ háº¡n 3-60 thÃ¡ng
   - âœ… Thu nháº­p > 0
2. Náº¿u Ä‘áº§y Ä‘á»§ â†’ Nháº¥n **"Tiáº¿p nháº­n há»“ sÆ¡"**
3. Há»“ sÆ¡ chuyá»ƒn sang `UNDER_REVIEW` vÃ  tá»± Ä‘á»™ng chuyá»ƒn phÃ²ng tháº©m Ä‘á»‹nh

### **GIAI ÄOáº N 3: PHÃ’NG THáº¨M Äá»ŠNH TÃN Dá»¤NG**
```
UNDER_REVIEW â†’ Tháº©m Ä‘á»‹nh â†’ ASSESSED â†’ Quyáº¿t Ä‘á»‹nh â†’ APPROVED/REJECTED
```
**Quy trÃ¬nh:**
1. **Kiá»ƒm tra Blacklist:**
   - Nháº¥n **"Kiá»ƒm tra Blacklist"**
   - Há»‡ thá»‘ng check email/SÄT trong danh sÃ¡ch Ä‘en
   - Náº¿u cÃ³ â†’ Tá»± Ä‘á»™ng tá»« chá»‘i (`REJECTED`)
   - Náº¿u sáº¡ch â†’ Tiáº¿p tá»¥c tháº©m Ä‘á»‹nh

2. **HoÃ n táº¥t Tháº©m Ä‘á»‹nh:**
   - Nháº¥n **"HoÃ n táº¥t tháº©m Ä‘á»‹nh"**
   - Nháº­p ghi chÃº Ä‘Ã¡nh giÃ¡
   - Tráº¡ng thÃ¡i chuyá»ƒn thÃ nh `ASSESSED`

3. **Quyáº¿t Ä‘á»‹nh cuá»‘i cÃ¹ng:**
   - **PhÃª duyá»‡t:** Nháº¥n **"PhÃª duyá»‡t"** â†’ `APPROVED`
   - **Tá»« chá»‘i:** Nháº¥n **"Tá»« chá»‘i"** + nháº­p lÃ½ do â†’ `REJECTED`

### **GIAI ÄOáº N 4: PHÃ’NG GIáº¢I NGÃ‚N**
```
APPROVED â†’ Giáº£i ngÃ¢n â†’ DISBURSED
```
**Quy trÃ¬nh:**
1. Nháº­n há»“ sÆ¡ Ä‘Ã£ phÃª duyá»‡t
2. Nháº¥n **"Thá»±c hiá»‡n giáº£i ngÃ¢n"**
3. Tráº¡ng thÃ¡i chuyá»ƒn thÃ nh `DISBURSED` (hoÃ n táº¥t)

---

## ğŸ“Š CÃC TRáº NG THÃI Há»’ SÆ 

| Tráº¡ng thÃ¡i | MÃ´ táº£ | PhÃ²ng ban xá»­ lÃ½ |
|------------|-------|-----------------|
| `SUBMITTED` | ğŸ“ ÄÃ£ ná»™p há»“ sÆ¡, chá» tiáº¿p nháº­n | PhÃ²ng Tiáº¿p Nháº­n |
| `UNDER_REVIEW` | ğŸ” Äang tháº©m Ä‘á»‹nh tÃ­n dá»¥ng | PhÃ²ng Tháº©m Äá»‹nh |
| `ASSESSED` | âš–ï¸ ÄÃ£ tháº©m Ä‘á»‹nh xong, chá» quyáº¿t Ä‘á»‹nh | PhÃ²ng Tháº©m Äá»‹nh |
| `APPROVED` | âœ… ÄÃ£ phÃª duyá»‡t, chá» giáº£i ngÃ¢n | PhÃ²ng Giáº£i NgÃ¢n |
| `REJECTED` | âŒ ÄÃ£ tá»« chá»‘i | Káº¿t thÃºc |
| `DISBURSED` | ğŸ’° ÄÃ£ giáº£i ngÃ¢n hoÃ n táº¥t | Káº¿t thÃºc |

---

## ğŸ–¥ï¸ GIAO DIá»†N Há»† THá»NG

### **KHÃCH HÃ€NG:**
- `/` - Trang chá»§ (redirect Ä‘áº¿n apply náº¿u Ä‘Ã£ login)
- `/apply` - Form ná»™p há»“ sÆ¡
- `/my-applications` - Dashboard khÃ¡ch hÃ ng
- `/customer/app/{id}` - Chi tiáº¿t há»“ sÆ¡

### **NGÃ‚N HÃ€NG:**
- `/admin/dashboard` - Dashboard tá»•ng quan (chá»‰ Admin)
- `/admin/intake` - PhÃ²ng Tiáº¿p Nháº­n
- `/admin/assessment` - PhÃ²ng Tháº©m Äá»‹nh
- `/admin/disbursement` - PhÃ²ng Giáº£i NgÃ¢n
- `/admin/{section}/app/{id}` - Chi tiáº¿t há»“ sÆ¡ theo phÃ²ng
- `/admin/{id}/contract` - Xem há»£p Ä‘á»“ng

---

## ğŸ” PHÃ‚N QUYá»€N Há»† THá»NG

### **Quyá»n truy cáº­p theo vai trÃ²:**

| Vai trÃ² | Dashboard | Tiáº¿p Nháº­n | Tháº©m Äá»‹nh | Giáº£i NgÃ¢n | KhÃ¡ch HÃ ng |
|---------|-----------|-----------|-----------|-----------|------------|
| **Admin** | âœ… | âœ… | âœ… | âœ… | âœ… |
| **Intake** | âŒ | âœ… | âŒ | âŒ | âŒ |
| **Assessment** | âŒ | âŒ | âœ… | âŒ | âŒ |
| **Disbursement** | âŒ | âŒ | âŒ | âœ… | âŒ |
| **Customer** | âŒ | âŒ | âŒ | âŒ | âœ… |

### **Thao tÃ¡c theo tráº¡ng thÃ¡i:**

| Tráº¡ng thÃ¡i | Tiáº¿p Nháº­n | Tháº©m Äá»‹nh | Giáº£i NgÃ¢n |
|------------|-----------|-----------|-----------|
| `SUBMITTED` | âœ… Tiáº¿p nháº­n | âŒ | âŒ |
| `UNDER_REVIEW` | âŒ | âœ… Check blacklist<br>âœ… Tháº©m Ä‘á»‹nh | âŒ |
| `ASSESSED` | âŒ | âœ… PhÃª duyá»‡t/Tá»« chá»‘i | âŒ |
| `APPROVED` | âŒ | âŒ | âœ… Giáº£i ngÃ¢n |
| `REJECTED` | âŒ | âŒ | âŒ |
| `DISBURSED` | âŒ | âŒ | âŒ |

---

## ğŸš€ LUá»’NG ÄIá»€U HÆ¯á»šNG Tá»° Äá»˜NG

### **Sau má»—i thao tÃ¡c thÃ nh cÃ´ng:**
1. **Tiáº¿p nháº­n há»“ sÆ¡** â†’ Tá»± Ä‘á»™ng chuyá»ƒn Ä‘áº¿n PhÃ²ng Tháº©m Äá»‹nh
2. **PhÃª duyá»‡t há»“ sÆ¡** â†’ Tá»± Ä‘á»™ng chuyá»ƒn Ä‘áº¿n PhÃ²ng Giáº£i NgÃ¢n
3. **HoÃ n táº¥t tháº©m Ä‘á»‹nh** â†’ á» láº¡i Ä‘á»ƒ tiáº¿p tá»¥c quyáº¿t Ä‘á»‹nh

### **Navigation giá»¯a cÃ¡c phÃ²ng:**
- Tab navigation á»Ÿ Ä‘áº§u trang
- NÃºt "Äáº¿n phÃ²ng tiáº¿p theo" á»Ÿ cuá»‘i trang chi tiáº¿t
- Breadcrumb Ä‘á»ƒ quay láº¡i

---

## ğŸ“ˆ TÃNH NÄ‚NG Bá»” SUNG

### **Dashboard & Thá»‘ng kÃª:**
- Sá»‘ lÆ°á»£ng há»“ sÆ¡ theo tráº¡ng thÃ¡i
- Workflow diagram trá»±c quan
- Quick actions cho tá»«ng phÃ²ng ban

### **Blacklist System:**
- Kiá»ƒm tra email vÃ  sá»‘ Ä‘iá»‡n thoáº¡i
- Tá»± Ä‘á»™ng tá»« chá»‘i náº¿u cÃ³ trong blacklist
- Dá»¯ liá»‡u máº«u: `fraud@example.com`, `0900000000`

### **Loan Calculator:**
- TÃ­nh khoáº£n tráº£ hÃ ng thÃ¡ng (12% lÃ£i suáº¥t/nÄƒm)
- Kiá»ƒm tra tá»· lá»‡ thu nháº­p/khoáº£n vay (khuyáº¿n khÃ­ch â‰¤33%)
- Validation realtime

### **Error Handling:**
- Log chi tiáº¿t má»i thao tÃ¡c
- Flash messages cho user feedback
- Exception handling toÃ n diá»‡n
- Role-based error redirection

---

## ğŸ› ï¸ SETUP & DEMO

### **Cháº¡y há»‡ thá»‘ng:**
```bash
# Windows
run.bat

# PowerShell
run.ps1
```

### **Truy cáº­p:**
- **á»¨ng dá»¥ng:** http://localhost:8080/
- **Login:** http://localhost:8080/login
- **Admin Dashboard:** http://localhost:8080/admin

### **Demo Flow hoÃ n chá»‰nh:**
1. Login `customer1/customer123` â†’ Ná»™p há»“ sÆ¡
2. Login `intake/intake123` â†’ Tiáº¿p nháº­n
3. Login `assessment/assessment123` â†’ Tháº©m Ä‘á»‹nh â†’ PhÃª duyá»‡t
4. Login `disbursement/disbursement123` â†’ Giáº£i ngÃ¢n
5. Quay láº¡i `customer1` â†’ Xem káº¿t quáº£

---

## ğŸ¯ Káº¾T LUáº¬N

Há»‡ thá»‘ng Ä‘Æ°á»£c thiáº¿t káº¿ theo **workflow thá»±c táº¿ cá»§a ngÃ¢n hÃ ng**, Ä‘áº£m báº£o:
- **PhÃ¢n quyá»n rÃµ rÃ ng** theo vai trÃ²
- **Quy trÃ¬nh cháº·t cháº½** khÃ´ng bá» sÃ³t bÆ°á»›c nÃ o
- **TrÃ¡ch nhiá»‡m phÃ¢n Ä‘á»‹nh** rÃµ rÃ ng giá»¯a cÃ¡c phÃ²ng ban
- **Audit trail** Ä‘áº§y Ä‘á»§ vá»›i timestamp vÃ  log
- **User experience** tá»‘t vá»›i navigation tá»± Ä‘á»™ng
- **Error handling** toÃ n diá»‡n vá»›i thÃ´ng bÃ¡o chi tiáº¿t